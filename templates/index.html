<!DOCTYPE html>
<html>
<head>
    <title>AI Document Summarizer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<div class="container">
    <h1>AI Document Summarizer</h1>

    <form id="summaryForm">
        <label>Enter text:</label>
        <textarea id="inputText" name="text" placeholder="Paste your text here..." required></textarea>

        <label>Or upload (.txt) file:</label>
        <input type="file" id="fileInput" accept=".txt">

        <label>Select Summary Style:</label>
        <select id="style" name="style">
            <option value="brief">üî• Brief Summary</option>
            <option value="detailed">üìò Detailed Summary</option>
            <option value="bullet">üìå Bullet Points</option>
        </select>

        <button type="submit" id="summarizeBtn">Summarize üöÄ</button>
    </form>

    <div id="loader" style="display:none;">‚è≥ Summarizing... please wait</div>

    <div id="output-box" style="display:none;">
        <h3>Summary</h3>
        <div id="result"></div>
    </div>
</div>

<script>
document.getElementById("summaryForm").addEventListener("submit", async function(e) {
    e.preventDefault();

    document.getElementById("loader").style.display = "block";
    document.getElementById("output-box").style.display = "none";

    const formData = new FormData();
    formData.append("text", document.getElementById("inputText").value);
    formData.append("style", document.getElementById("style").value);

    try {
        const response = await fetch("/summarize", {
            method: "POST",
            body: formData
        });

        const data = await response.json();
        if (data.summary) {
            document.getElementById("result").innerText = data.summary;
            document.getElementById("output-box").style.display = "block";
        } else {
            alert("Error: " + (data.error || "Something went wrong"));
        }
    } catch (err) {
        alert("Request failed: " + err);
    }

    document.getElementById("loader").style.display = "none";
});

// Handle file upload
document.getElementById("fileInput").addEventListener("change", function() {
    const file = this.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
        document.getElementById("inputText").value = e.target.result;
    };
    reader.readAsText(file);
});
</script>

</body>
</html>
